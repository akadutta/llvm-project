; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=sparc64 -mattr=+vis3 < %s | FileCheck %s

define float @fnadds(float %a, float %b) nounwind {
; CHECK-LABEL: fnadds:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnadds %f1, %f3, %f0
entry:
  %add = fadd float %a, %b
  %fneg = fneg float %add
  ret float %fneg
}

define double @fnaddd(double %a, double %b) nounwind {
; CHECK-LABEL: fnaddd:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnaddd %f0, %f2, %f0
entry:
  %add = fadd double %a, %b
  %fneg = fneg double %add
  ret double %fneg
}

define float @fnmuls(float %a, float %b) nounwind {
; CHECK-LABEL: fnmuls:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnmuls %f1, %f3, %f0
entry:
  %mul = fmul float %a, %b
  %fneg = fneg float %mul
  ret float %fneg
}

define double @fnmuld(double %a, double %b) nounwind {
; CHECK-LABEL: fnmuld:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnmuld %f0, %f2, %f0
entry:
  %mul = fmul double %a, %b
  %fneg = fneg double %mul
  ret double %fneg
}

define double @fnsmuld(float %a, float %b) nounwind {
; CHECK-LABEL: fnsmuld:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnsmuld %f1, %f3, %f0
entry:
  %conv.i = fpext float %a to double
  %conv1.i = fpext float %b to double
  %mul = fmul double %conv.i, %conv1.i
  %fneg = fneg double %mul
  ret double %fneg
}

define float @fhadds(float %a, float %b) nounwind {
; CHECK-LABEL: fhadds:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fhadds %f1, %f3, %f0
entry:
  %add = fadd float %a, %b
  %div = fmul float %add, 5.000000e-01
  ret float %div
}

define double @fhaddd(double %a, double %b) nounwind {
; CHECK-LABEL: fhaddd:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fhaddd %f0, %f2, %f0
entry:
  %add = fadd double %a, %b
  %div = fmul double %add, 5.000000e-01
  ret double %div
}

define float @fhsubs(float %a, float %b) nounwind {
; CHECK-LABEL: fhsubs:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fhsubs %f1, %f3, %f0
entry:
  %sub = fsub float %a, %b
  %div = fmul float %sub, 5.000000e-01
  ret float %div
}

define double @fhsubd(double %a, double %b) nounwind {
; CHECK-LABEL: fhsubd:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fhsubd %f0, %f2, %f0
entry:
  %sub = fsub double %a, %b
  %div = fmul double %sub, 5.000000e-01
  ret double %div
}

define float @fnhadds(float %a, float %b) nounwind {
; CHECK-LABEL: fnhadds:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnhadds %f1, %f3, %f0
entry:
  %add.i = fadd float %a, %b
  %fneg = fmul float %add.i, -5.000000e-01
  ret float %fneg
}

define double @fnhaddd(double %a, double %b) nounwind {
; CHECK-LABEL: fnhaddd:
; CHECK:       ! %bb.0: ! %entry
; CHECK-NEXT:    retl
; CHECK-NEXT:    fnhaddd %f0, %f2, %f0
entry:
  %add.i = fadd double %a, %b
  %fneg = fmul double %add.i, -5.000000e-01
  ret double %fneg
}
